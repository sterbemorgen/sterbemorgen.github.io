/* ====================================
   移动端响应式修复 CSS
   适配手机和平板设备
   ==================================== */

/* ========== 基础响应式布局 ========== */
@media screen and (max-width: 768px) {
    /* 隐藏侧边栏,移动端只显示主内容 */
    #sideContainer {
        display: none !important;
    }
    
    /* 主内容区域占满宽度 */
    .main,
    .container {
        max-width: 100% !important;
        margin: 0 auto !important;
        padding: 0 16px !important;
    }
    
    /* 文章内容宽度 */
    .post-single {
        max-width: 100% !important;
        padding: 0 !important;
    }
    
    .post-content {
        padding: 0 !important;
    }
    
    /* Profile模式调整 */
    .profile {
        padding: 20px !important;
    }
    
    .profile img {
        width: 100px !important;
        height: 100px !important;
    }
}

/* ========== Shortcode 响应式修复 ========== */
@media screen and (max-width: 768px) {
    /* 通用iframe容器 */
    .post-content iframe,
    .post-content embed,
    .post-content object,
    .post-content video {
        max-width: 100% !important;
        width: 100% !important;
    }
    
    /* YouTube 视频容器 */
    .youtube-container,
    .video-container {
        position: relative;
        padding-bottom: 56.25%; /* 16:9 宽高比 */
        height: 0;
        overflow: hidden;
        max-width: 100%;
        margin: 20px 0;
    }
    
    .youtube-container iframe,
    .video-container iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100% !important;
        height: 100% !important;
    }
    
    /* Bilibili 视频容器 */
    .bilibili-container {
        position: relative;
        padding-bottom: 56.25%;
        height: 0;
        overflow: hidden;
        max-width: 100%;
        margin: 20px 0;
    }
    
    .bilibili-container iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100% !important;
        height: 100% !important;
    }
    
    /* Apple Music 嵌入 */
    iframe[src*="music.apple.com"] {
        width: 100% !important;
        max-width: 100% !important;
        min-height: 450px;
    }
    
    /* Spotify 嵌入 */
    iframe[src*="spotify.com"] {
        width: 100% !important;
        max-width: 100% !important;
    }
    
    /* Mastodon 嵌入 */
    iframe[src*="mastodon"],
    .mastodon-embed {
        width: 100% !important;
        max-width: 100% !important;
    }
    
    /* NeoDB 卡片 */
    .neodb-card,
    .neodb-container {
        width: 100% !important;
        max-width: 100% !important;
        margin: 20px 0 !important;
    }
    
    .neodb-card img {
        max-width: 100% !important;
        height: auto !important;
    }
}

/* ========== 图片和媒体响应式 ========== */
@media screen and (max-width: 768px) {
    /* 文章内所有图片 */
    .post-content img {
        max-width: 100% !important;
        height: auto !important;
        display: block;
        margin: 10px auto;
    }
    
    /* Figure容器 */
    .post-content figure {
        max-width: 100% !important;
        margin: 20px 0 !important;
    }
    
    .post-content figure img {
        width: 100% !important;
    }
    
    .post-content figcaption {
        font-size: 14px;
        padding: 8px;
    }
}

/* ========== 表格响应式 ========== */
@media screen and (max-width: 768px) {
    /* 表格横向滚动 */
    .post-content table {
        display: block;
        overflow-x: auto;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
        margin: 20px 0;
    }
    
    .post-content table th,
    .post-content table td {
        padding: 8px 12px;
        font-size: 14px;
    }
}

/* ========== 代码块响应式 ========== */
@media screen and (max-width: 768px) {
    .post-content pre {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        padding: 12px !important;
        font-size: 13px !important;
    }
    
    .post-content code {
        font-size: 13px;
        word-break: break-word;
    }
    
    /* 行内代码 */
    .post-content p code {
        word-break: break-word;
        white-space: pre-wrap;
    }
}

/* ========== 导航和菜单响应式 ========== */
@media screen and (max-width: 768px) {
    /* 主菜单 */
    .nav {
        padding: 10px 16px;
    }
    
    .menu {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    .menu a {
        padding: 8px 12px;
        font-size: 14px;
    }
    
    /* Logo */
    .logo a {
        font-size: 18px;
    }
}

/* ========== 页脚响应式 ========== */
@media screen and (max-width: 768px) {
    .footer {
        padding: 20px 16px;
        font-size: 13px;
    }
    
    .footer section {
        margin: 10px 0;
    }
    
    .totalcount,
    .running-time,
    .visit-stats {
        text-align: center;
        word-break: break-word;
    }
}

/* ========== 列表和归档页面响应式 ========== */
@media screen and (max-width: 768px) {
    .post-entry {
        padding: 16px !important;
    }
    
    .post-entry .entry-header h2 {
        font-size: 18px !important;
    }
    
    .post-entry .entry-content {
        font-size: 14px;
    }
    
    /* Archive 页面 */
    .archive-year {
        font-size: 20px;
    }
    
    .archive-month {
        font-size: 16px;
    }
    
    .archive-entry {
        padding: 10px 0;
    }
}

/* ========== 搜索页面响应式 ========== */
@media screen and (max-width: 768px) {
    #searchInput {
        width: 100% !important;
        font-size: 16px;
        padding: 12px;
    }
    
    #searchResults li {
        padding: 12px 0;
    }
}

/* ========== 面包屑导航响应式 ========== */
@media screen and (max-width: 768px) {
    .breadcrumbs {
        font-size: 13px;
        overflow-x: auto;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
    }
}

/* ========== 标签和分类响应式 ========== */
@media screen and (max-width: 768px) {
    .post-tags,
    .terms-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
    }
    
    .post-tags a,
    .terms-tags a {
        font-size: 13px;
        padding: 4px 10px;
    }
}

/* ========== 分享按钮响应式 ========== */
@media screen and (max-width: 768px) {
    .share-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        justify-content: center;
    }
    
    .share-buttons a {
        flex: 0 0 auto;
    }
}

/* ========== TOC 目录响应式 ========== */
@media screen and (max-width: 768px) {
    .toc {
        margin: 20px 0;
        padding: 15px;
        font-size: 14px;
    }
    
    .toc ul {
        padding-left: 20px;
    }
}

/* ========== 引用和提示框响应式 ========== */
@media screen and (max-width: 768px) {
    .post-content blockquote {
        padding: 12px 16px;
        margin: 20px 0;
        font-size: 14px;
    }
    
    /* Collapse 折叠组件 */
    details {
        margin: 15px 0;
    }
    
    details summary {
        padding: 10px;
        font-size: 15px;
    }
}

/* ========== 平板设备优化 (768px - 1024px) ========== */
@media screen and (min-width: 769px) and (max-width: 1024px) {
    .main {
        max-width: 90% !important;
    }
    
    .post-content {
        font-size: 16px;
    }
    
    /* 适当显示侧边栏或调整布局 */
    #sideContainer {
        width: 200px;
    }
}

/* ========== 横屏手机优化 ========== */
@media screen and (max-width: 900px) and (orientation: landscape) {
    .footer {
        padding: 15px;
    }
    
    .post-content {
        font-size: 14px;
    }
}

/* ========== 小屏手机优化 (<375px) ========== */
@media screen and (max-width: 375px) {
    .main,
    .container {
        padding: 0 12px !important;
    }
    
    .post-content {
        font-size: 14px;
    }
    
    .post-entry .entry-header h2 {
        font-size: 16px !important;
    }
    
    .footer {
        font-size: 12px;
    }
}

/* ========== 触摸设备优化 ========== */
@media (hover: none) and (pointer: coarse) {
    /* 增大可点击区域 */
    a,
    button {
        min-height: 44px;
        min-width: 44px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }
    
    /* 移除hover效果 */
    a:hover,
    button:hover {
        transform: none;
    }
}
